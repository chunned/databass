<table class="dynamic-search-table">
{% set type = data[0] %}
{% set items = data[1] %}
{% for i in range(items|length) %}
    {% if i % 7 == 0 %}
        <tr>
    {% endif %}
            <td>
                {% set id = items[i].id %}
                {% if type == 'release' %}
                    <a class="link" href="/release/{{ id }}">
                {% elif type == 'artist' %}
                    <a class="link" href="/artist/{{ id }}">
                {% elif type == 'label' %}
                    <a class="link" href="/label/{{ id }}">
                {% endif %}

                {% if items[i].image %}
                    {% set local_img = id|img_exists(type, items[i].image) %}
                    {% if local_img %}
                        <img src="{{ local_img }}" alt="Image for {{ items[i] }}">
                    {% else %}
                        <img src="{{ items[i].image }}" alt="Image for {{ items[i] }}">
                    {% endif %}
                {% else %}
                    <p>{{ items[i].name }} ({{ items[i].rating }}%)</p>
                {% endif %}
                </a>
            </td>
{% endfor %}
        </tr>
</table>
